{% extends 'base.html' %}
{% block title %}Athira Clinic Center | Edit Patient{% endblock %}
{% block content %}
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">
            Edit Patient
        </h1>
    </div>
</div>

<div class="row">
	<div class="col-lg-12">
		<form action="." method="post" enctype="multipart/form-data">{% csrf_token %}
			<div class="row">
                <div class="col-lg-12">
                    {% if messages %}
                        {% for message in messages %}
                            <div class="alert alert-success">
                              <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                                <strong>{{ message }}</strong>
                            </div>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
            <div class="row">
				<div class="col-lg-12">
					<div class="pull-right">
						<a href="{% url 'dashboard' %}" class="btn btn-danger btn-md"><i class="fa fa-times"></i> Cancel</a>
						<button class="btn btn-success btn-md" type="submit" name="save" value="save"><i class="fa fa-save"></i> Save</button>
					</div>
				</div>
			</div>
			<br>
			<div class="row">
				<!-- <div class="col-lg-3">
					<div class="form-group">
						<label>Register No</label>*
						<input type="text" class="form-control input-sm"  name="username" id="" placeholder="Enter Register No" value=""  required>
					</div>
				</div> -->
				<div class="col-lg-3">
					<div class="form-group">
						<label>Salutation</label>
						<select class="form-control input-sm" id="id_salutation" name="salutation" value="">
							<option value="">-------</option>
								{% for sl in salutation_list %}
									<option {% if sl in patient_id.salutation %}selected="selected"{% endif %} value="{{sl}}">{{sl}}</option>
								{% endfor %}
						</select>
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Name</label>
						<input type="text"  class="form-control input-sm" name="name" id="id_name" value="{{patient_id.name|default_if_none:''}}" placeholder="Enter Name" />
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Date of Registration</label>
						<input type="text" class="form-control input-sm datepicker"  id="id_date_of_reg" data-date-format="dd-mm-yyyy" placeholder="DD-MM-YYYY" name="date_of_reg" value="{{patient_id.date_of_reg|default_if_none:''|date:'d-m-Y'}}" />
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Date of Birth</label>
						<input type="text" class="form-control input-sm datepicker"  id="id_date_of_birth" data-date-format="dd-mm-yyyy" placeholder="DD-MM-YYYY" name="date_of_birth" value="{{patient_id.date_of_birth|default_if_none:''|date:'d-m-Y'}}" />
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="col-lg-3">
					<div class="form-group">
						<label>Age</label>
						<input type="text"  class="form-control input-sm" name="age" id="id_age" value="{{patient_id.age|default_if_none:''}}" placeholder="Enter Age" />
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Gender</label>
						<select class="form-control input-sm" id="id_gender" name="gender">
							<option value="">-------</option>
							{% for gen in gender_list %}
								<option {% if gen in patient_id.gender %}selected="selected"{% endif %} value="{{gen}}">{{gen}}</option>
							{% endfor %}
						</select>
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Birth Place</label>
						<input type="text"  class="form-control input-sm" name="birth_place" id="id_birth_place" value="{{patient_id.birth_place|default_if_none:''}}" placeholder="Enter Birth Place" />
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Country of Birth</label>
						<select class="form-control input-sm" id="id_country_of_birth" name="country_of_birth" >
							<option value="">-------</option>
							{% for ctry in country_list %}
								<option {% if ctry in patient_id.country_of_birth %}selected="selected"{% endif %} value="{{ctry}}">{{ctry}}</option>
							{% endfor %}
						</select>
					</div>
				</div>
			</div>
		
			<div class="row">
				<div class="col-lg-3">
					<div class="form-group">
						<label>Education</label>
						<select class="form-control input-sm" id="id_education" name="education" >
							<option value="">-------</option>
							{% for edu in edu_list %}
								<option {% if edu in patient_id.education %}selected="selected"{% endif %} value="{{edu}}">{{edu}}</option>
							{% endfor %}
						</select>
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Occupation</label>
						<select class="form-control input-sm" id="id_occupation" name="occupation" >
							<option value="">-------</option>
							{% for ocp in occp_list %}
								<option {% if ocp in patient_id.occupation %}selected="selected"{% endif %} value="{{ocp}}">{{ocp}}</option>
							{% endfor %}
						</select>
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Occupation History</label>
						<input type="text"  class="form-control input-sm" name="ocp_history" id="id_ocp_history" value="{{patient_id.ocp_history|default_if_none:''}}" placeholder="Enter Occupation History" />
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Income</label>
						<select class="form-control input-sm" id="id_income" name="income">
							<option value="">-------</option>
							{% for inc in income_list %}
								<option {% if inc in patient_id.income %}selected="selected"{% endif %} value="{{inc}}">{{inc}}</option>
							{% endfor %}
						</select>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-3">
					<div class="form-group">
						<label>Mobile No.</label>
						<input type="text" class="form-control input-sm"  name="mobile_no" id="id_mobile_no" value="{{patient_id.mobile_no|default_if_none:''}}" placeholder="Enter Mobile No" />
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Email ID</label>
						<input type="text"  class="form-control input-sm" name="email" id="id_email" value="{{patient_id.email|default_if_none:''}}" placeholder="Enter Email ID" />
					</div>
				</div>
			</div>
			
			<h4>Permanent Address</h4>
			<hr>
			<div class="row">
				<div class="col-lg-9">
					<div class="form-group">
						<label>Address Details</label>
						<textarea class="form-control input-sm"  name="pa_address_detail" id="id_pa_address_detail" placeholder="Enter Address">{{patient_id.pa_address_detail|default_if_none:''}}</textarea>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-3">
					<div class="form-group">
						<label>City</label>
						<select class="form-control input-sm" id="id_pa_city" name="pa_city">
							<option value="">-------</option>
							{% for cty in city_list %}
								<option {% if cty in patient_id.pa_city %}selected="selected"{% endif %} value="{{cty}}">{{cty}}</option>
							{% endfor %}
						</select>
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>State</label>
						<select class="form-control input-sm" id="id_pa_state" name="pa_state">
							<option value="">-------</option>
							{% for st in state_list %}
								<option {% if st in patient_id.pa_state %}selected="selected"{% endif %} value="{{st}}">{{st}}</option>
							{% endfor %}
						</select>
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Country</label>
						<select class="form-control input-sm" id="id_pa_country" name="pa_country">
							<option value="">-------</option>
							{% for ct in country_list %}
								<option {% if ct in patient_id.pa_country %}selected="selected"{% endif %} value="{{ct}}">{{ct}}</option>
							{% endfor %}
						</select>
					</div>
				</div>
			</div>
			<h4>Temporary Address</h4>
			<hr>
			<div class="row">
				<div class="col-lg-9">
					<div class="form-group">
						<label>Address Details</label>
						<textarea class="form-control input-sm"  name="ta_address_detail" id="id_ta_address_detail" placeholder="Enter Address">{{patient_id.ta_address_detail|default_if_none:''}}</textarea>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-3">
					<div class="form-group">
						<label>City</label>
						<select class="form-control input-sm" id="id_ta_city" name="ta_city">
							<option value="">-------</option>
							{% for cty in city_list %}
								<option {% if cty in patient_id.ta_city %}selected="selected"{% endif %} value="{{cty}}">{{cty}}</option>
							{% endfor %}
						</select>
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>State</label>
						<select class="form-control input-sm" id="id_ta_state" name="ta_state">
							<option value="">-------</option>
							{% for st in state_list %}
								<option {% if st in patient_id.ta_state %}selected="selected"{% endif %} value="{{st}}">{{st}}</option>
							{% endfor %}
						</select>
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Country</label>
						<select class="form-control input-sm" id="id_ta_country" name="ta_country">
							<option value="">-------</option>
							{% for ct in country_list %}
								<option {% if ct in patient_id.ta_country %}selected="selected"{% endif %} value="{{ct}}">{{ct}}</option>
							{% endfor %}
						</select>
					</div>
				</div>
			</div>
			<h4>Referred By</h4>
			<hr>
			<div class="row">
				<div class="col-lg-3">
					<div class="form-group">
						<label>Salutation</label>
						<select class="form-control input-sm" id="id_rf_salutation" name="rf_salutation">
							<option value="">-------</option>
							{% for sl in salutation_list %}
								<option {% if sl in patient_id.rf_salutation %}selected="selected"{% endif %} value="{{sl}}">{{sl}}</option>
							{% endfor %}
						</select>
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Name</label>
						<input type="" class="form-control input-sm"  name="rf_name" id="id_rf_name" value="{{patient_id.rf_name|default_if_none:''}}" placeholder="Enter Name">
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Specialization</label>
						<input type="text"  class="form-control input-sm" name="specialization" id="id_specialization" value="{{patient_id.specialization|default_if_none:''}}" placeholder="Enter Specialization">
					</div>
				</div>
				<div class="col-lg-3">
					<div class="form-group">
						<label>Mobile No.</label>
						<input type="text"  class="form-control input-sm" name="contact" id="id_contact" value="{{patient_id.contact|default_if_none:''}}" placeholder="Enter Mobile No">
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-9">
					<div class="form-group">
						<label>Address Details</label>
						<textarea class="form-control input-sm"  name="address" id="id_address" placeholder="Enter Address">{{patient_id.address|default_if_none:''}}</textarea>
					</div>
				</div>
			</div>

           	<h4>Sound or Video or Text file</h4>
           	<hr>
			<div class="row">
			   <!-- div class="col-lg-9">
					<label>Upload Files</label>
					<input type="file" name="upload_file" id="id_upload_file" class="btn btn-default" multiple>
					<div class="col-lg-4" style="text-align:right;">
						<input type="button" id="btnUpload" style="display:none" class="btn btn-default" value="Upload File" onclick​="uploadFiles()">
					</div>
	            </div>
	            <div class="row">
	                <div id="divFiles" class="files">
	                </div>
	            </div> -->

	            <div class="input-group uploadFiles">
                    <span class="input-group-btn">
                        <span class="btn btn-primary btn-file btn-sm">
                            <input type="file" id="id_upload_files" name="upload_files" multiple>
                        </span>
                    </span>
                    
                </div>
			</div>
			<div class="row" style="margin-top:30px;">
			    <div class="col-lg-9">
			        <div class="table-responsive">
			            <table class="table table-striped table-bordered" id="example">
			                <thead>
			                    <tr>
			                        <th>Uploaded File Name</th>
			                        <th>Action</th>
			                    </tr>
			                </thead>
			                <tbody>
		                        <tr>
		                            <td align="center"><a href="/media/{{patient_id.upload_file}}">{{patient_id.upload_file|stringformat:"s"|slice:"12:"}}</a></td>
									<td align="center">
										<a href="" class="delete" style="color:red"><i class="fa fa-trash"></i></a>
									</td>
		                        </tr>
		                        <tr>
					              <td colspan="2" class="text-center bg-warning">No Data Found</td>
					            </tr>
			                </tbody>
			            </table>
			        </div>
			    </div>
			</div>
			<br><br>
			<div class="row">
				<div class="col-lg-9">
					<div class="form-group">
						<label>Notes</label>
						<textarea class="form-control input-sm"  name="notes" id="id_notes" placeholder="Enter Notes">{{patient_id.notes|default_if_none:''}}</textarea>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-lg-12">
					<div class="pull-right">
						<a href="{% url 'dashboard' %}" class="btn btn-danger btn-md"><i class="fa fa-times"></i> Cancel</a>
						<button class="btn btn-success btn-md" type="submit" name="save" value="save"><i class="fa fa-save"></i> Save</button>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>
<link rel="stylesheet" href="/static/assets/css/jquery-ui.css">
<style>
    .ui-widget-header {
        background: none;
        background-color: yellow;
        border: 1px solid #aaaaaa ;
        color: #222222 ;
        font-weight: bold;
    }
</style>
<link rel="stylesheet" href="/static/assets/css/bootstrap-timepicker.min.css">
<script src="/static/assets/js/jquery.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
<script type="text/javascript" src="/static/assets/js/jquery-ui.js"></script>
<script type="text/javascript" src="/static/assets/js/jquery.easy-confirm-dialog.js"></script>
<script type="text/javascript" src="/static/assets/js/bootstrap-datepicker.js"></script>
<script type="text/javascript">
	$(document).ready(function uploadFiles() {
	    var file = document.getElementById("upload_files")//All files
		for (var i = 0; i < file.files.length; i++) {
		      uploadSingleFile(file.files[i], i);
			}
	} );
	// function uploadFiles() {
	// var file = document.getElementById("fileUploader")//All files
	// for (var i = 0; i < file.files.length; i++) {
	//       uploadSingleFile(file.files[i], i);
	// 	}
	// }
	$( ".datepicker" ).datepicker({autoclose:true,});

	$(document).ready(function() {
    $('#example').DataTable();
	} );


	$(".delete").easyconfirm({locale: {
	    title: 'Confirmation Alert!',
	    text: 'Are you sure want to delete this file?',
	}});

</script>

{% endblock %}